<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SBrandsborg Minecraft ATM 10 Server - Statistics</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #2c2f33;
            color: #fff;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: row;
            justify-content: center;
        }
        .container {
            max-width: 700px;
            padding: 20px;
            background: #3e3e3e;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            text-align: center;
        }
        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        .stats-summary {
            width: 100%;
            margin-top: 20px;
            border-collapse: collapse;
        }
        .stats-summary th, .stats-summary td {
            border: 1px solid #fff;
            padding: 10px;
        }
        .chart-container {
            margin-top: 20px;
        }
        .players-container {
            margin-left: 20px;
            padding: 20px;
            background: #23272a;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            width: 250px;
        }
        .players-container ul {
            list-style-type: none;
            padding: 0;
        }
        .summary-text {
            margin-top: 20px;
            font-size: 18px;
        }
        .highlight {
            font-weight: bold;
            cursor: pointer;
            text-decoration: underline;
        }
        a {
            color: #f1c40f;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="header">⛏️ SBrandsborg Minecraft ATM 10 Server - Statistics ⛏️</h1>
        <div class="top-bar">
            <a href="https://sbrandsborg.github.io/MinecraftServer/">🏠 Return to Main Page</a>
            <p>🔄 Updated every 15 minutes</p>
        </div>
        
        <h2>🌍 Server Overview</h2>
        <p>For <strong><span id="days">0</span></strong> in-game days, adventurers have roamed the land. The sun rises, mobs lurk at night, and right now, it's <span id="dayNight">unknown</span>. The in-game clock strikes <strong><span id="time">00:00</span></strong> – another day of adventure begins! ⛏️🌞🌙</p>
        
        <h2>📜 The Epic Saga Continues...</h2>
        <p class="summary-text" id="summaryText">Loading data...</p>
        
        <h2>📊 Server Summary</h2>
        <table class="stats-summary">
            <tr>
                <th>Chests Looted</th>
                <th>Items Inserted (ME Network)</th>
                <th>Mob Kills</th>
                <th>Times Jumped</th>
                <th>Deaths</th>
                <th>Time Played (Minutes)</th>
                <th>Blocks Mined</th>
            </tr>
            <tr>
                <td id="totalChestsLooted">0</td>
                <td id="totalItemsInserted">0</td>
                <td id="totalMobKills">0</td>
                <td id="totalTimesJumped">0</td>
                <td id="totalDeaths">0</td>
                <td id="totalTimePlayed">0</td>
                <td id="totalBlocksMined">0</td>
            </tr>
        </table>
        
        <h2>📈 Player Statistics</h2>
        <div class="chart-container">
            <canvas id="chestsChart"></canvas>
            <canvas id="itemsChart"></canvas>
            <canvas id="mobsChart"></canvas>
            <canvas id="jumpsChart"></canvas>
            <canvas id="deathsChart"></canvas>
            <canvas id="timePlayedChart"></canvas>
            <canvas id="blocksMinedChart"></canvas>
        </div>
    </div>
    
    <div class="players-container">
        <p><strong>Online Players</strong></p>
        <ul id="onlinePlayers"></ul>
        <p><strong>Offline Players</strong></p>
        <ul id="offlinePlayers"></ul>
    </div>

    <script>
        async function fetchStats() {
            try {
                const response = await fetch('Get-MCStats.json');
                const data = await response.json();
                
                document.getElementById('time').textContent = data.currentInGameTime || "00:00";
                document.getElementById('days').textContent = data.inGameDays || "0";
                document.getElementById('dayNight').textContent = data.currentInGameTime && parseInt(data.currentInGameTime.split(':')[0]) >= 6 && parseInt(data.currentInGameTime.split(':')[0]) < 18 ? "☀️ Daytime in the Overworld" : "🌙 Nighttime in the Overworld";
                
                document.getElementById('totalChestsLooted').textContent = data.totalChestsLooted || "0";
                document.getElementById('totalItemsInserted').textContent = data.totalItemsInserted || "0";
                document.getElementById('totalMobKills').textContent = data.totalMobKills || "0";
                document.getElementById('totalTimesJumped').textContent = data.totalTimesJumped || "0";
                document.getElementById('totalDeaths').textContent = data.totalDeaths || "0";
                document.getElementById('totalTimePlayed').textContent = data.totalTimePlayed ? Math.floor(data.totalTimePlayed / 20) : "0";
                document.getElementById('totalBlocksMined').textContent = data.totalBlocksMined || "0";
                
                document.getElementById('summaryText').textContent = "🔥 The legend grows! Players have mined " + data.totalBlocksMined + " blocks, looted " + data.totalChestsLooted + " chests, stored " + data.totalItemsInserted + " treasures, and slain " + data.totalMobKills + " mighty foes!";
            } catch (error) {
                console.error('Error fetching stats:', error);
            }
        }
        fetchStats();
        setInterval(fetchStats, 900000);
    </script>
</body>
</html>
