<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SBrandsborg Minecraft ATM 10 Server - Statistics</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #2b2d31;
            color: #fff;
            padding: 20px;
            margin: 0;
        }
        .container {
            display: flex;
        }
        .content {
            width: 75%;
            margin-right: 10px;
            background-color: #383b40;
            padding: 20px;
            border-radius: 10px;
        }
        .sidebar {
            width: 25%;
            background-color: #202225;
            padding: 15px;
            border-radius: 10px;
        }
        h1, h2, h3 {
            margin: 10px 0;
        }
        ul {
            padding-left: 20px;
            list-style-type: none;
        }
        .online {color: #4CAF50;}
        .offline {color: #ff4c4c;}
        .stats-table {
            width: 100%;
            text-align: center;
            border-collapse: collapse;
            margin-top: 15px;
        }
        .stats-table th, .stats-table td {
            border: 1px solid #555;
            padding: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="content">
            <h1>SBrandsborg Minecraft ATM 10 Server - Statistics</h1>
            <p>üîÑ Updated every 15 minutes</p>
            <div>
                <h2>üåç Server Overview</h2>
                <p id="serverOverview">Loading data...</p>

                <h2>üìú The Epic Saga Continues...</h2>
                <p id="epicSaga">In a world carved by courage and determination, players continue to push the boundaries, unearthing treasures, conquering foes, and etching their stories into the land. Each block mined and each chest looted marks another step toward legendary status. Their journey is far from over, and many adventures still await...</p>

                <h2>üìä Server Summary</h2>
                <table class="stats-table">
                    <thead>
                        <tr>
                            <th>Chests Looted</th>
                            <th>Items Inserted (ME Network)</th>
                            <th>Mob Kills</th>
                            <th>Times Jumped</th>
                            <th>Deaths</th>
                            <th>Time Played (Minutes)</th>
                            <th>Blocks Mined</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr id="summaryStats">
                            <td colspan="7">Loading stats...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="sidebar">
            <h3>Online Players</h3>
            <ul id="onlinePlayers"></ul>

            <h3>Offline Players</h3>
            <ul id="offlinePlayers"></ul>
        </div>
    </div>

    <script>
        async function fetchStats() {
            try {
                const response = await fetch('Get-MCStats.json');
                const data = await response.json();

                const time = data.currentInGameTime;
                const days = data.inGameDays;

                document.getElementById('serverOverview').innerHTML =
                    `For <strong>${days}</strong> in-game days, adventurers have roamed the land. 
                    The sun rises, mobs lurk at night, and right now, it's 
                    ${(parseInt(time.split(':')[0]) >= 6 && parseInt(time.split(':')[0]) < 18) ? '‚òÄÔ∏è Daytime' : 'üåô Nighttime'} in the Overworld. 
                    The in-game clock strikes <strong>${time}</strong> ‚Äì another day of adventure begins!`;

                const onlinePlayers = data.onlinePlayers;
                const allPlayers = data.playerStats.map(p => p.playerName);
                const offlinePlayers = allPlayers.filter(p => !onlinePlayers.includes(p));

                document.getElementById('onlinePlayers').innerHTML = onlinePlayers.map(p => `<li class="online">${p}</li>`).join('');
                document.getElementById('offlinePlayers').innerHTML = offlinePlayers.map(p => `<li class="offline">${p}</li>`).join('');

            } catch (error) {
                console.error('Error:', error);
            }
        }

        fetchStats();
        setInterval(fetchStats, 900000);
    </script>
</body>
</html>
